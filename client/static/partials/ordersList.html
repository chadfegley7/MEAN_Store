<div ng-controller="ordersController">
<h2>Add a new Order</h2>
<form ng-submit="addOrder()">
	<div ng-controller="customersController">

		Customer: <select ng-model='new_order.name'><option ng-repeat='customer in customers'>{{ customer.name }}</option></select>
	</div>
	<div ng-controller="productsController">
		Order: <input type='number' min='1' ng-model='new_order.qty' ng-init='new_order.qty=1'>

		<select ng-model='new_order.product'>
			<option ng-repeat="product in products">
				{{ product.name }}
			</option>
		</select>

	</div>

<input type='submit' value='Add'>
</form>
<div>
	<input type='text' ng-model='filter_name' placeholder='search name...'>
</div>
<table border="1">
	<thead>
		<th>Name</th>
		<th>Product</th>
		<th>Quantity</th>
		<th>Created Date</th>
	</thead>

	<tbody>
		<tr ng-repeat='order in orders | filter: filter_name track by $index'>
			<td>{{order.name}}</td>
			<td>{{order.product}}</td>
			<td>{{order.qty}}</td>
			<td>{{order.created_at | date: 'MMMM dd, yyyy'}}</td>

		</tr>
	</tbody>
</table>
</div>
